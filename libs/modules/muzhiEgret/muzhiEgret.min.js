var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},muzhiEgret;!function(t){function e(t,e,n){void 0===e&&(e="click"),void 0===n&&(n=1),"undefined"==typeof window._czc&&(window._czc=[]),window._czc.push(["_trackEvent",t,e,"startup",n])}function n(t){function e(e){var n=e.currentTarget,i=JSON.parse(n.response);r&&clearTimeout(r),"function"==typeof t.success&&t.success(i)}function n(e){r&&clearTimeout(r),"function"==typeof t.error&&t.error(e)}var r,o="post"===(t.type||"").toLowerCase(),s=new egret.HttpRequest;!o&&t.data&&(t.url=t.url+(-1!==t.url.indexOf("?")?"&":"?")+i(t.data)),s.responseType=egret.HttpResponseType.TEXT,s.open(t.url,o?egret.HttpMethod.POST:egret.HttpMethod.GET),t.noMuzhiHeader||(s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),window.muzhi&&window.muzhi.weixin&&window.muzhi.weixin.mz_jwt&&s.setRequestHeader("Authorization","Bearer "+window.muzhi.weixin.mz_jwt)),"function"==typeof t.before&&t.before(s),o&&t.data?s.send(i(t.data)):s.send(),t.timeout&&(r=setTimeout(function(){s.abort()},t.timeout)),s.addEventListener(egret.Event.COMPLETE,e,this),s.addEventListener(egret.IOErrorEvent.IO_ERROR,n,this)}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,i,o,s=[].slice.call(arguments),a=s.shift(),h=[];if(null===a)return a;if(a.constructor===Array){for(n=0,i=a.length;i>n;n++)o=a[n],h[h.length]=r(o,s.slice(),n);return h.join("&")}if(a.constructor===Object){for(n in a)o=a[n],h[h.length]=r(o,s.slice(),n);return h.join("&")}return a}function r(t,e,n){return e[e.length]=n,"object"==typeof t?(e.unshift(t),i.apply(this,e)):(e[e.length]=t,o.apply(this,e))}function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[].slice.call(arguments),i=encodeURIComponent(n.shift()),r="="+encodeURIComponent(n.pop()),o=0,s=n.length,a=[];s>o;o++)a[o]=encodeURIComponent("["+n[o]+"]");return a[a.length]=r,a.unshift(i),a.join("")}function s(t){var e=new egret.Bitmap,n=RES.getRes(t);return e.texture=n,e}function a(t,e){var n=e||t.parent||egret.MainContext.instance.stage,i="undefined"==typeof n.stageWidth?n.width:n.stageWidth;i>t.width?t.x=(i-t.width)/2:t.x=(t.width-i)/2}function h(t,e){var n=e||t.parent||egret.MainContext.instance.stage,i="undefined"==typeof n.stageHeight?n.height:n.stageHeight;i>t.height?t.y=(i-t.height)/2:t.y=(t.height-i)/2}function u(e){f||(f=new t.TipsClass,egret.MainContext.instance.stage.addChild(f)),f.tips(e)}function c(t,e){var n=RES.getRes(e),i=n.getTexture(t),r=new egret.Bitmap;return r.texture=i,r}function g(t){t=t||window.location.search;for(var e,n=t.length>0?t.substring(1):"",i={},r=n&&n.split("&")||[],o=0,s=r.length;s>o;o++)e=r[o].split("="),i[e[0]]=e[1];return i}function l(){return v+ ++E}function p(t){var e,n,i;switch(null!=t&&t.constructor){case Array:for(e=0,n=t.length,i=[];n>e;e++)i[e]=p(t[e]);return i;case Object:i={};for(e in t)i[e]=p(t[e]);return i}return t}function d(t){setTimeout(t)}t.tongji=e,t.ajax=n,t.createBitmapByName=s,t.center=a,t.middle=h;var f;t.tips=u,t.createBitmapFromSheet=c,t.getSearchArgs=g;var v=Math.random().toString(36).substring(2,6),E=0;t.randomId=l,t.clone=p,t.async=d}(muzhiEgret||(muzhiEgret={}));var muzhiEgret;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.init,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.destroy,e),e}return __extends(e,t),e.prototype.init=function(){var t=this.stage.stageWidth-20,e=80,n=new egret.Sprite,i=new egret.Shape,r=new egret.TextField;i.graphics.beginFill(0,.8),i.graphics.lineStyle(3,0),i.graphics.drawRoundRect(10,0,t,e,30,30),i.graphics.endFill(),r.width=t,r.height=e,r.verticalAlign="middle",r.textAlign="center",r.size=30,r.text="",r.textColor=16777215,n.addChild(i),n.addChild(r),n.y=(this.stage.stageHeight-e)/2,n.alpha=0,n.visible=!1,this.textField=r,this.layer=n,this.addChild(n)},e.prototype.destroy=function(){egret.Tween.pauseTweens(this.layer)},e.prototype.tips=function(t){var e=this;this.textField.text=t,clearTimeout(this.timeout),this.layer.visible=!0,egret.Tween.pauseTweens(this.layer),this.parent.setChildIndex(this,10),egret.Tween.get(this.layer).to({alpha:1},200).call(function(){this.timeout=setTimeout(function(){egret.Tween.get(e.layer).to({alpha:0},200).call(function(){e.layer.visible=!1},e)},2e3)},this)},e}(egret.Sprite);t.TipsClass=e}(muzhiEgret||(muzhiEgret={}));var muzhiEgret;!function(t){var e=function(){function e(t,e,n){this.target=t,this.viewHeight=e,this.barColor=n||5592405,this.init()}return e.prototype.init=function(){var t=this.target,e=t.scrollRect||new egret.Rectangle(0,0,t.width,this.viewHeight);this.max=t.height-this.viewHeight,this.max<1||(this.scrollInfo=this.scrollBarInfo(),this.createTouchBg(),this.createScrollBar(),e.y>this.max&&(e.y=this.max),t.scrollRect=new egret.Rectangle(0,0,t.width,this.viewHeight),t.cacheAsBitmap=!0,this.addEvent())},e.prototype.reset=function(){this.destroy(),this.init()},e.prototype.createTouchBg=function(){var t=this.target,e=new egret.Shape;e.graphics.beginFill(16777215,0),e.graphics.drawRect(0,0,t.width,t.height),e.graphics.endFill(),t.addChildAt(e,0),this.touchBg=e},e.prototype.createScrollBar=function(){var e=this.target,n=this.scrollInfo,i=new egret.Shape,r=t.Scroller.barWidth;i.graphics.beginFill(this.barColor),i.graphics.drawRect(0,0,r,n.height),i.graphics.endFill(),i.x=e.width-r,i.alpha=0,e.addChildAt(i,100),this.scrollBar=i},e.prototype.scrollBarInfo=function(){var t,e,n=this.target.height,i=this.viewHeight;return n>i?(t=i/n,e=Math.max(i*t,5),{height:0|e,max:i-e|0}):{height:0,max:0}},e.prototype.addEvent=function(){var t=this.target;t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchStart,this),t.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),t.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),t.stage.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this),t.addEventListener(egret.Event.REMOVED,this.destroy,this)},e.prototype.removeEvent=function(){var t=this.target;t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchStart,this),t.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),t.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),t.stage.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this),t.removeEventListener(egret.Event.REMOVED,this.destroy,this)},e.prototype.touchStart=function(e){var n=this.target.scrollRect;e.stopPropagation(),this.startY=e.stageY,this.currentY=n.y,egret.Tween.pauseTweens(this.scrollBar),egret.Tween.get(this.scrollBar).to({alpha:1},t.Scroller.barAniTime)},e.prototype.touchMove=function(t){var e,n,i=this.target,r=i.scrollRect;t.stopPropagation(),"number"==typeof this.startY&&(e=this.startY-t.stageY,n=this.currentY+e,n>this.max?n=this.max:0>n&&(n=0),r.y=n,i.scrollRect=r,this.scrollBar.y=n+this.scrollInfo.max*n/this.max|0)},e.prototype.touchEnd=function(e){e.stopPropagation(),"number"==typeof this.startY&&(egret.Tween.pauseTweens(this.scrollBar),egret.Tween.get(this.scrollBar).to({alpha:0},t.Scroller.barAniTime),this.startY=null)},e.prototype.destroy=function(){var t=this.target;this.removeEvent(),this.touchBg&&(t.removeChild(this.touchBg),this.touchBg=null),this.scrollBar&&(t.removeChild(this.scrollBar),this.scrollBar=null)},e}();e.barWidth=8,e.barAniTime=500,t.Scroller=e}(muzhiEgret||(muzhiEgret={}));var muzhiEgret;!function(t){var e=function(){function t(t,e){void 0===e&&(e={}),this.status="stop",this.position=0,this.loops=0,this.options={play:function(){},pause:function(){},stop:function(){}},this.sound=t,"function"==typeof e.play&&(this.options.play=e.play),"function"==typeof e.pause&&(this.options.pause=e.pause),"function"==typeof e.stop&&(this.options.stop=e.stop)}return t.prototype.play=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.loops=e,("stop"===this.status||"pause"===this.status)&&(this.channel=this.sound.play("pause"===this.status?this.position:t,1),this.addEvent(),this.changeStatus("play"))},t.prototype.pause=function(){this.channel&&"play"===this.status&&(this.position=this.channel.position,this.channel.stop(),this.changeStatus("pause"),this.removeEvent(),this.channel=null)},t.prototype.stop=function(){this.channel&&(this.position=0,this.channel.stop(),this.changeStatus("stop"),this.removeEvent(),this.channel=null)},t.prototype.changeStatus=function(t){this.status=t,this.options[t]()},t.prototype.addEvent=function(){this.channel.addEventListener(egret.Event.SOUND_COMPLETE,this.complete,this)},t.prototype.removeEvent=function(){this.channel.removeEventListener(egret.Event.SOUND_COMPLETE,this.complete,this)},t.prototype.complete=function(){this.stop(),0===this.loops&&this.play()},t}();t.MusicPlayer=e}(muzhiEgret||(muzhiEgret={}));var muzhiEgret;!function(t){var e;!function(e){function n(t){var e={data:null,pubed:!1,list:{}};u[t]=e}function i(e){t.async(function(){var n,i=u[e],r=i.list;for(n in r)r[n](t.clone(i.data))})}function r(e,i){var r,o;return u[e]||n(e),r=u[e],o=t.randomId(),c[o]={name:e},r.list[o]=i,r.pubed&&t.async(function(){i(t.clone(r.data))}),o}function o(t,e){var n=this,i=this.sub(t,function(t){n.unsub(i),e(t)});return i}function s(t,e){var r,o=!!u[t];o||n(t),r=u[t],r.pubed=!0,r.data=e,o&&i(t)}function a(t){var e=c[t];e&&(delete u[e.name].list[t],delete c[t])}function h(t){var e;for(e in c)c[e].name===t&&delete c[e];delete u[t]}var u={},c={};e.sub=r,e.once=o,e.pub=s,e.unsub=a,e.clear=h}(e=t.sub||(t.sub={}))}(muzhiEgret||(muzhiEgret={}));var muzhiEgret;!function(t){var e=function(){function t(t,e){this.target=t,this.tips=e,this.init()}return t.prototype.init=function(){this.target.text=this.tips,this.addEvent()},t.prototype.addEvent=function(){this.target.addEventListener(egret.FocusEvent.FOCUS_IN,this.focusIn,this),this.target.addEventListener(egret.FocusEvent.FOCUS_OUT,this.focusOut,this),this.target.addEventListener(egret.Event.REMOVED,this.destroy,this)},t.prototype.removeEvent=function(){this.target.removeEventListener(egret.FocusEvent.FOCUS_IN,this.focusIn,this),this.target.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.focusOut,this),this.target.removeEventListener(egret.Event.REMOVED,this.destroy,this)},t.prototype.focusIn=function(){var t=this.target;t.text===this.tips&&(t.text="")},t.prototype.focusOut=function(){var t=this.target;""===t.text&&(t.text=this.tips)},t.prototype.destroy=function(){this.removeEvent()},t}();t.Placeholder=e}(muzhiEgret||(muzhiEgret={}));var muzhiEgret;!function(t){var e=function(){function t(){this.list=[]}return t.prototype.add=function(t){var e=this.list;"function"==typeof t&&(e[e.length]=function(){var n=e.shift()||function(){};Array.prototype.push.call(arguments,n),t.apply(null,arguments)})},t.prototype.run=function(){var t=this.list;t.length>0&&t.shift()()},t}();t.OperationChain=e}(muzhiEgret||(muzhiEgret={}));var muzhiEgret;!function(t){var e=function(t){function e(e,n,i,r,o){var s=t.call(this)||this;return s.dataName=e,s.textureName=n,s.photoName=i,s.armatureName=r,s.frameName=o,s.addEventListener(egret.Event.ADDED_TO_STAGE,s.init,s),s.addEventListener(egret.Event.REMOVED_FROM_STAGE,s.destroy,s),s}return __extends(e,t),e.prototype.init=function(){var t,e=RES.getRes(this.dataName),n=RES.getRes(this.textureName),i=RES.getRes(this.photoName),r=new dragonBones.EgretFactory;r.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(e)),r.addTextureAtlas(new dragonBones.EgretTextureAtlas(i,n)),t=r.buildArmature(this.armatureName),this.addChild(t.display),this.armature=t,this.addEvent(),this.armature.animation.gotoAndPlay(this.frameName)},e.prototype.addEvent=function(){dragonBones.WorldClock.clock.add(this.armature)},e.prototype.removeEvent=function(){dragonBones.WorldClock.clock.remove(this.armature)},e.prototype.destroy=function(){this.removeEvent()},e}(egret.Sprite);t.DragonbonesSprite=e}(muzhiEgret||(muzhiEgret={}));var muzhiEgret;!function(t){var e;!function(t){function e(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var r=(egret.MainContext.instance.stage,window[e.page]),g={left:s,right:a,top:h,bottom:u,alpha:c,common:o}[e.type||t.aniType];if(!r)throw"没有"+e.page+"页面";e.type=e.type||t.aniType,e.time="undefined"==typeof e.time?t.aniTime:e.time,e.end=e.end||function(){},g(new(Function.prototype.bind.apply(r,[null].concat(n))),e)}function n(t){g=t}function i(){return g}function r(t,e){g&&(egret.Tween.pauseTweens(g),g.parent.removeChild(g)),g=t,e.end(g)}function o(t,e){var n=egret.MainContext.instance.stage;g&&n.removeChild(g),g=t,n.addChild(g),e.end(g)}function s(t,e){var n=egret.MainContext.instance.stage,i=n.stageWidth;g&&egret.Tween.get(g).to({x:i},e.time,egret.Ease.sineIn),t.x=-i,n.addChild(t),egret.Tween.get(t).to({x:0},e.time,egret.Ease.sineIn).call(function(){r(t,e)})}function a(t,e){var n=egret.MainContext.instance.stage,i=n.stageWidth;g&&egret.Tween.get(g).to({x:-i},e.time,egret.Ease.sineIn),t.x=i,n.addChild(t),egret.Tween.get(t).to({x:0},e.time,egret.Ease.sineIn).call(function(){r(t,e)})}function h(t,e){var n=egret.MainContext.instance.stage,i=n.stageHeight;g&&egret.Tween.get(g).to({y:i},e.time,egret.Ease.sineIn),t.y=-i,n.addChild(t),egret.Tween.get(t).to({y:0},e.time,egret.Ease.sineIn).call(function(){r(t,e)})}function u(t,e){var n=egret.MainContext.instance.stage,i=n.stageHeight;g&&egret.Tween.get(g).to({y:-i},e.time,egret.Ease.sineIn),t.y=i,n.addChild(t),egret.Tween.get(t).to({y:0},e.time,egret.Ease.sineIn).call(function(){r(t,e)})}function c(t,e){var n=egret.MainContext.instance.stage;g&&egret.Tween.get(g).to({alpha:0},e.time,egret.Ease.sineIn),t.alpha=0,n.addChild(t),egret.Tween.get(t).to({alpha:1},e.time,egret.Ease.sineIn).call(function(){r(t,e)})}var g;t.aniType="common",t.aniTime=200,t.to=e,t.setCurrent=n,t.getCurrent=i}(e=t.route||(t.route={}))}(muzhiEgret||(muzhiEgret={}));